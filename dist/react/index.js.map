{"version":3,"sources":["../../src/react/index.ts","../../src/core/devtools.ts"],"sourcesContent":["\r\nimport { useEffect, useRef } from 'react';\r\nimport { AntiDevtools, AntiDevtoolsConfig } from '../core/devtools';\r\n\r\nexport interface UseAntiDevtoolsOptions extends AntiDevtoolsConfig { }\r\n\r\nexport function useAntiDevtools(options: UseAntiDevtoolsOptions = {}) {\r\n    const devtoolsRef = useRef<AntiDevtools | null>(null);\r\n\r\n    useEffect(() => {\r\n        // Initialize DevTools protection\r\n        devtoolsRef.current = new AntiDevtools(options);\r\n\r\n        return () => {\r\n            // Cleanup\r\n            if (devtoolsRef.current) {\r\n                devtoolsRef.current.destroy();\r\n                devtoolsRef.current = null;\r\n            }\r\n        };\r\n    }, []); // Run once on mount\r\n}\r\n","\r\nexport interface AntiDevtoolsConfig {\r\n    ondevtoolopen?: () => void;\r\n    ondevtoolclose?: () => void;\r\n    interval?: number;\r\n    clearIntervalWhenDevOpenTrigger?: boolean;\r\n}\r\n\r\nconst defaultConfig: AntiDevtoolsConfig = {\r\n    ondevtoolopen: () => {\r\n        window.location.href = \"about:blank\";\r\n    },\r\n    ondevtoolclose: undefined,\r\n    interval: 500,\r\n    clearIntervalWhenDevOpenTrigger: false,\r\n};\r\n\r\nexport class AntiDevtools {\r\n    private config: AntiDevtoolsConfig;\r\n    private isDevToolOpen: boolean = false;\r\n    private intervalId: number | null = null;\r\n\r\n    constructor(options?: AntiDevtoolsConfig) {\r\n        this.config = { ...defaultConfig, ...options };\r\n        if (typeof window !== 'undefined') {\r\n            this.init();\r\n        }\r\n    }\r\n\r\n    private triggerOpen() {\r\n        if (!this.isDevToolOpen) {\r\n            this.isDevToolOpen = true;\r\n            if (this.config.ondevtoolopen) {\r\n                this.config.ondevtoolopen();\r\n            }\r\n            if (this.config.clearIntervalWhenDevOpenTrigger && this.intervalId) {\r\n                clearInterval(this.intervalId);\r\n                this.intervalId = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    private triggerClose() {\r\n        if (this.isDevToolOpen) {\r\n            this.isDevToolOpen = false;\r\n            if (this.config.ondevtoolclose) {\r\n                this.config.ondevtoolclose();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Method 1: Console Object Property Trap\r\n     */\r\n    private consoleDetection() {\r\n        const element = new Image();\r\n        let detected = false;\r\n\r\n        // We need to use Object.defineProperty on the Image object\r\n        // But since we can't reliably trigger it without console.dir/log which might not work in all environments as expected\r\n        // We will stick to the logic provided in the original script but typed\r\n\r\n        Object.defineProperty(element, 'id', {\r\n            get: () => {\r\n                detected = true;\r\n                this.triggerOpen();\r\n                return 'devtools-detector';\r\n            }\r\n        });\r\n\r\n        // Use console.dir for better property inspection\r\n        // @ts-ignore\r\n        console.dir(element);\r\n        console.clear();\r\n\r\n        return detected;\r\n    }\r\n\r\n    /**\r\n     * Method 3: Window Size Detection\r\n     */\r\n    private sizeDetection() {\r\n        const widthThreshold = 200;\r\n        const heightThreshold = 200;\r\n\r\n        // Account for browser chrome (toolbars, scrollbars, etc)\r\n        const widthDiff = window.outerWidth - window.innerWidth;\r\n        const heightDiff = window.outerHeight - window.innerHeight;\r\n\r\n        // More conservative thresholds to avoid false positives\r\n        if (widthDiff > widthThreshold || heightDiff > heightThreshold) {\r\n            this.triggerOpen();\r\n            return true;\r\n        } else {\r\n            this.triggerClose();\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Method 5: DevTools Protocol Detection (Chrome)\r\n     */\r\n    private chromeDevtoolsDetection() {\r\n        // @ts-ignore\r\n        if (window.chrome && window.chrome.devtools) {\r\n            this.triggerOpen();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Method 6: Firebug Detection (Legacy Firefox)\r\n     */\r\n    private firebugDetection() {\r\n        // @ts-ignore\r\n        if (window.Firebug && window.Firebug.chrome && window.Firebug.chrome.isInitialized) {\r\n            this.triggerOpen();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private detect = () => {\r\n        // Prioritize more reliable detection methods\r\n        this.consoleDetection();\r\n        // regexpDetection(); // Can cause false positives - omitted\r\n        this.sizeDetection();\r\n        // toStringDetection(); // Can cause false positives - omitted\r\n        this.chromeDevtoolsDetection();\r\n        this.firebugDetection();\r\n    }\r\n\r\n    public init() {\r\n        if (this.intervalId) return;\r\n\r\n        // Start detection interval\r\n        this.intervalId = window.setInterval(this.detect, this.config.interval);\r\n\r\n        // Also check on window resize (catches undocking DevTools)\r\n        window.addEventListener('resize', this.detect);\r\n\r\n        // Initial check\r\n        this.detect();\r\n    }\r\n\r\n    public destroy() {\r\n        if (this.intervalId) {\r\n            clearInterval(this.intervalId);\r\n            this.intervalId = null;\r\n        }\r\n        window.removeEventListener('resize', this.detect);\r\n    }\r\n}\r\n"],"mappings":"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","names":[]}